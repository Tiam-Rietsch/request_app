{% extends 'base.html' %}

{% block title %}Nouvelle Requ√™te{% endblock %}

{% block content %}
<div class="container" style="max-width: 800px;">
    <div class="flex flex-between items-center mb-3">
        <h1>üìù Nouvelle Requ√™te</h1>
        <a href="{% url 'student_requests' %}" class="btn btn-secondary">‚Üê Retour</a>
    </div>

    <div class="card">
        <div class="card-header">
            <h3 class="card-title">Formulaire de requ√™te</h3>
            <p style="color: var(--text-secondary); margin: 0.5rem 0 0 0; font-size: 0.875rem;">
                Veuillez remplir tous les champs requis
            </p>
        </div>

        <div class="card-body">
            <form method="post" novalidate>
                {% csrf_token %}

                {% if form.non_field_errors %}
                    <div class="alert alert-error">
                        {{ form.non_field_errors }}
                    </div>
                {% endif %}

                <!-- Niveau et Fili√®re -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                    <div class="form-group">
                        {{ form.class_level.label_tag }}
                        {{ form.class_level }}
                        {% if form.class_level.errors %}
                            <div class="form-error">{{ form.class_level.errors.0 }}</div>
                        {% endif %}
                    </div>

                    <div class="form-group">
                        {{ form.field.label_tag }}
                        {{ form.field }}
                        {% if form.field.errors %}
                            <div class="form-error">{{ form.field.errors.0 }}</div>
                        {% endif %}
                    </div>
                </div>

                <!-- Axe (optionnel) -->
                <div class="form-group">
                    {{ form.axis.label_tag }}
                    {{ form.axis }}
                    {% if form.axis.errors %}
                        <div class="form-error">{{ form.axis.errors.0 }}</div>
                    {% endif %}
                    <small style="color: var(--text-secondary);">
                        Optionnel - S√©lectionnez si applicable
                    </small>
                </div>

                <!-- Mati√®re -->
                <div class="form-group">
                    {{ form.subject.label_tag }}
                    {{ form.subject }}
                    {% if form.subject.errors %}
                        <div class="form-error">{{ form.subject.errors.0 }}</div>
                    {% endif %}
                </div>

                <!-- Type de requ√™te -->
                <div class="form-group">
                    {{ form.type.label_tag }}
                    {{ form.type }}
                    {% if form.type.errors %}
                        <div class="form-error">{{ form.type.errors.0 }}</div>
                    {% endif %}
                    <small style="color: var(--text-secondary);">
                        CC: Contr√¥le Continu | EXAM: Examen
                    </small>
                </div>

                <!-- Description -->
                <div class="form-group">
                    {{ form.description.label_tag }}
                    {{ form.description }}
                    {% if form.description.errors %}
                        <div class="form-error">{{ form.description.errors.0 }}</div>
                    {% endif %}
                    <small style="color: var(--text-secondary);">
                        D√©crivez pr√©cis√©ment votre demande
                    </small>
                </div>

                <!-- Info Box -->
                <div class="alert alert-info">
                    <strong>üìå Information:</strong> Votre requ√™te sera automatiquement assign√©e √† l'enseignant responsable.
                    <ul style="margin: 0.5rem 0 0 1.5rem; padding: 0;">
                        <li><strong>CC</strong>: Assign√© √† l'enseignant de la mati√®re</li>
                        <li><strong>EXAM</strong>: Assign√© au Chef de D√©partement de votre fili√®re</li>
                    </ul>
                </div>

                <!-- Submit Button -->
                <div class="flex gap-2 mt-2">
                    <button type="submit" class="btn btn-primary">
                        ‚úì Soumettre la requ√™te
                    </button>
                    <a href="{% url 'student_requests' %}" class="btn btn-outline">
                        Annuler
                    </a>
                </div>
            </form>
        </div>
    </div>

    <!-- Help Section -->
    <div class="card mt-2">
        <div class="card-header">
            <h4 style="margin: 0; font-size: 1rem;">üí° Aide</h4>
        </div>
        <div style="padding: 1rem;">
            <p style="margin: 0 0 0.75rem 0;"><strong>Comment soumettre une requ√™te ?</strong></p>
            <ol style="margin: 0; padding-left: 1.5rem; color: var(--text-secondary); line-height: 1.6;">
                <li>S√©lectionnez votre niveau et fili√®re</li>
                <li>Choisissez la mati√®re concern√©e</li>
                <li>Indiquez le type de requ√™te (CC ou EXAM)</li>
                <li>D√©crivez votre demande de mani√®re claire et pr√©cise</li>
                <li>Soumettez le formulaire</li>
            </ol>
            <p style="margin: 1rem 0 0 0; color: var(--text-secondary); font-size: 0.875rem;">
                Vous pourrez suivre l'√©volution de votre requ√™te depuis votre tableau de bord.
            </p>
        </div>
    </div>
</div>
{% endblock %}
